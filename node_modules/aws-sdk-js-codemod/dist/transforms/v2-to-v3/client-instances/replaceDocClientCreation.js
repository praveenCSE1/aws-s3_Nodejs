"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.replaceDocClientCreation = void 0;
const config_1 = require("../config");
const utils_1 = require("../utils");
const getDynamoDBDocClientArgs_1 = require("./getDynamoDBDocClientArgs");
const replaceDocClientCreation = (j, source, { v2ClientName, v2ClientLocalName, v2GlobalName }) => {
    if (v2ClientName !== config_1.DYNAMODB)
        return;
    if (v2GlobalName) {
        source
            .find(j.NewExpression, (0, utils_1.getClientNewExpression)({ v2GlobalName, v2ClientName: config_1.DYNAMODB_DOCUMENT_CLIENT }))
            .replaceWith((v2DocClientNewExpression) => j.callExpression(j.memberExpression(j.identifier(config_1.DYNAMODB_DOCUMENT), j.identifier("from")), (0, getDynamoDBDocClientArgs_1.getDynamoDBDocClientArgs)(j, v2DocClientNewExpression, v2ClientLocalName)));
    }
    source
        .find(j.NewExpression, (0, utils_1.getClientNewExpression)({ v2ClientLocalName: `${v2ClientLocalName}.${config_1.DOCUMENT_CLIENT}` }))
        .replaceWith((v2DocClientNewExpression) => j.callExpression(j.memberExpression(j.identifier(config_1.DYNAMODB_DOCUMENT), j.identifier("from")), (0, getDynamoDBDocClientArgs_1.getDynamoDBDocClientArgs)(j, v2DocClientNewExpression, v2ClientLocalName)));
};
exports.replaceDocClientCreation = replaceDocClientCreation;
