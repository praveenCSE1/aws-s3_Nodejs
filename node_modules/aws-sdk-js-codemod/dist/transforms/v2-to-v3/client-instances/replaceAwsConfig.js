"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.replaceAwsConfig = void 0;
const getObjectWithUpdatedAwsConfigKeys_1 = require("./getObjectWithUpdatedAwsConfigKeys");
const replaceAwsConfig = (j, source, { v2GlobalName, awsGlobalConfig }) => {
    if (!v2GlobalName)
        return;
    source
        .find(j.NewExpression, {
        callee: {
            type: "MemberExpression",
            object: { type: "Identifier", name: v2GlobalName },
            property: { type: "Identifier", name: "Config" },
        },
    })
        .filter(({ node }) => node.arguments.length === 0 ||
        (node.arguments.length === 1 && node.arguments[0].type === "ObjectExpression"))
        .replaceWith(({ node }) => {
        const objectExpression = node.arguments.length === 0
            ? j.objectExpression([])
            : node.arguments[0];
        return (0, getObjectWithUpdatedAwsConfigKeys_1.getObjectWithUpdatedAwsConfigKeys)(j, objectExpression, awsGlobalConfig);
    });
};
exports.replaceAwsConfig = replaceAwsConfig;
