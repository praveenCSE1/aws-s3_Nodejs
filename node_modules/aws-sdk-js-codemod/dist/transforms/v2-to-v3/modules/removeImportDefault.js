"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.removeImportDefault = void 0;
const removeDeclaration_1 = require("./removeDeclaration");
const removeImportDefault = (j, source, { localName, sourceValue }) => {
    source
        .find(j.ImportDeclaration, {
        specifiers: [{ local: { name: localName } }],
        source: { value: sourceValue },
    })
        .forEach((declarationPath) => {
        // Remove default/namespace import from ImportDeclaration if there is a match
        declarationPath.value.specifiers = declarationPath.value.specifiers?.filter((specifier) => {
            if (!["ImportDefaultSpecifier", "ImportNamespaceSpecifier"].includes(specifier.type)) {
                return true;
            }
            return specifier.local?.name !== localName;
        });
        // Remove ImportDeclaration if there are no import specifiers.
        if (declarationPath.value.specifiers?.length === 0) {
            (0, removeDeclaration_1.removeDeclaration)(j, source, declarationPath);
        }
    });
};
exports.removeImportDefault = removeImportDefault;
