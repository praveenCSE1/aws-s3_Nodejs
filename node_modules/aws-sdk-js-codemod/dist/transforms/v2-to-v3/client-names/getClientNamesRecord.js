"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getClientNamesRecord = void 0;
const modules_1 = require("../modules");
const getClientNamesFromDeepImport_1 = require("./getClientNamesFromDeepImport");
const getClientNamesRecordFromImport_1 = require("./getClientNamesRecordFromImport");
const getClientNamesRecordFromRequire_1 = require("./getClientNamesRecordFromRequire");
const getClientNamesRecord = (j, source, importType) => {
    const clientNamesFromDeepImport = (0, getClientNamesFromDeepImport_1.getClientNamesFromDeepImport)(source.toSource());
    const clientNamesRecord = importType === modules_1.ImportType.REQUIRE
        ? (0, getClientNamesRecordFromRequire_1.getClientNamesRecordFromRequire)(j, source, clientNamesFromDeepImport)
        : (0, getClientNamesRecordFromImport_1.getClientNamesRecordFromImport)(j, source, clientNamesFromDeepImport);
    // Populate client names for type transformations
    // Ref: https://github.com/awslabs/aws-sdk-js-codemod/issues/663
    for (const clientName of clientNamesFromDeepImport) {
        if (!(clientName in clientNamesRecord)) {
            clientNamesRecord[clientName] = clientName;
        }
    }
    return clientNamesRecord;
};
exports.getClientNamesRecord = getClientNamesRecord;
